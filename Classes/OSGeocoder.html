<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>OSGeocoder Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">OSMap </a></h1>
				<a id="developerHome" href="../index.html">Ordnance Survey</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">OSGeocoder Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/geocoding">&nbsp;&nbsp;&nbsp;&nbsp;geocoding</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/cancelGeocode">&nbsp;&nbsp;&nbsp;&nbsp;- cancelGeocode</option>
	
	<option value="//api/name/geocodeString:type:inBoundingRect:withRange:completionHandler:">&nbsp;&nbsp;&nbsp;&nbsp;- geocodeString:type:inBoundingRect:withRange:completionHandler:</option>
	
	<option value="//api/name/initWithDatabase:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithDatabase:</option>
	
	<option value="//api/name/initWithDatabase:apiKey:openSpacePro:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithDatabase:apiKey:openSpacePro:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/geocoding">geocoding</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/cancelGeocode">cancelGeocode</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/geocodeString:type:inBoundingRect:withRange:completionHandler:">geocodeString:type:inBoundingRect:withRange:completionHandler:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithDatabase:">initWithDatabase:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithDatabase:apiKey:openSpacePro:">initWithDatabase:apiKey:openSpacePro:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="OSGeocoder Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">OSGeocoder Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">OSGeocoder.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>OSGeocoder provides an interface to lookup positions based on place names, postcodes, grid references, roads, or any
combination thereof.</p>

<p>It operates on either/both an offline database which is provided with the SDK or Ordnance Survey online services</p>

<p>OSGeocoder is not thread-safe, and is not reentrant. It must only be called from a single thread, and only one geocoding
operation can be run at any one time. Clients should use cancelGeocode to cancel online searches, and not issue requests
while isGeocoding returns YES.</p>

<p>The search always returns a (possibly empty) array of objects derived from OSPlacemark objects. Any matching roads are
returned as OSRoad objects.</p>

<p>A search of type OSGeocodeTypeOnlinePostcode or OSGeocodeTypeOnlineGazetteer will use the appropriate Ordnance Survey
online service to fetch results.</p>

<p>A search of type OSGeocodeTypeGazetteer will return matching place names. These will be ordered by the type of place;
Cities will be returned before Towns, and Towns before other features.</p>

<p>A search of type OSGeocodeTypeGridReference will treat the search term as an OS Grid Reference. It will return up to one
result. A valid search term consists of two letters as per the [OS National Grid Square convention][<a href="https://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page9.html">https://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page9.html</a>]
followed by 0,2,4,6,8 or 10 digits. Invalid search terms (not matching this format, or containing invalid letter
sequences) will return no results.</p>

<p>A search of type OSGeocodeTypeRoad will return roads matching the search term. If none are found, then the search term
will be split into a road and a location.  If a comma is present in the search term, the split will be made there,
otherwise the split is carried out automatically. The search will then return roads near matching locations.</p>

<p>OSGeocoder allows searches to be carried out with a range. The behaviour of this range varies.</p>

<p>A search over multiple types (for example Gazetteer and Road) will search for entries of the specified types that
match the search string. These results will be ordered by result type.</p>

<p>The range field is honoured for searches of type OSGeocodeTypeGazetteer and OSGeocodeTypeRoad, but ignored for all
other types of search. A search combining multiple types will honour the range field where it can, but will apply the
range individually to each result set, so a combined search with a range of</p>

<pre><code>    (NSRange){0,100} 
</code></pre>

<p>may return 100 gazetteer entries AND 100 roads.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithDatabase:">&ndash;&nbsp;initWithDatabase:</a></code>
		<span class="tooltip"><p>Initialise the Geocoder in offline only mode</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithDatabase:apiKey:openSpacePro:">&ndash;&nbsp;initWithDatabase:apiKey:openSpacePro:</a></code>
		<span class="tooltip"><p>Initialise the OSGeocoder</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/geocodeString:type:inBoundingRect:withRange:completionHandler:">&ndash;&nbsp;geocodeString:type:inBoundingRect:withRange:completionHandler:</a></code>
		<span class="tooltip"><p>type of search to execute</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/cancelGeocode">&ndash;&nbsp;cancelGeocode</a></code>
		<span class="tooltip"><p>Cancel an existing <a href="#//api/name/geocoding">geocoding</a> operation</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/geocoding">&nbsp;&nbsp;geocoding</a></code>
		<span class="tooltip"><p>Indicates whether a geocoding operation is in progress.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/geocoding" title="geocoding"></a>
	<h3 class="subsubtitle method-title">geocoding</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Indicates whether a geocoding operation is in progress.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readonly, getter=isGeocoding) bool geocoding</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OSGeocoder.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/cancelGeocode" title="cancelGeocode"></a>
	<h3 class="subsubtitle method-title">cancelGeocode</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Cancel an existing <a href="#//api/name/geocoding">geocoding</a> operation</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)cancelGeocode</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OSGeocoder.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/geocodeString:type:inBoundingRect:withRange:completionHandler:" title="geocodeString:type:inBoundingRect:withRange:completionHandler:"></a>
	<h3 class="subsubtitle method-title">geocodeString:type:inBoundingRect:withRange:completionHandler:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>type of search to execute</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)geocodeString:(NSString *)<em>s</em> type:(OSGeocodeType)<em>type</em> inBoundingRect:(OSGridRect)<em>rect</em> withRange:(NSRange)<em>range</em> completionHandler:(OSGeocoderCompletionHandler)<em>completionHandler</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>type</em></dt>
			<dd><p>type of search to execute</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>rect</em></dt>
			<dd><p>limiting rectangle for search. To search the entire area, specify either OSGridRectNull or OSNationalGridBounds. This parameter is ignored for online searches</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>range</em></dt>
			<dd><p>specifies number (and offset) of results to return. This will be applied individually to each</p>

<pre><code>    type of search, so a range of {0,100} may return more than 100 results on combined gazetteer/road searches. 
    The range is ignored for postcode and grid reference searches.
</code></pre>

<p>To return ALL results, set range to</p>

<pre><code>{NSNotFound, 0}
</code></pre></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>completionHandler</em></dt>
			<dd><p>block to call with the results.</p>

<pre><code>Callbacks for offline searches will be made synchronously, while callbacks for online searches will be made asynchronously on the caller thread. A search which comprises both offline 
and online types may results in up to two callbacks, one synchronous, and one asynchronous.

If no results are found, completionHandler will be called once (even for combiend offline/online searches) with a non-nil error indicating the problem. 

The completionHandler MUST NOT start a search before returning if the error is OSGeocoderErrorCancelled. 
</code></pre></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OSGeocoder.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithDatabase:" title="initWithDatabase:"></a>
	<h3 class="subsubtitle method-title">initWithDatabase:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Initialise the Geocoder in offline only mode</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (id)initWithDatabase:(NSString *)<em>path</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OSGeocoder.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithDatabase:apiKey:openSpacePro:" title="initWithDatabase:apiKey:openSpacePro:"></a>
	<h3 class="subsubtitle method-title">initWithDatabase:apiKey:openSpacePro:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Initialise the OSGeocoder</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (id)initWithDatabase:(NSString *)<em>path</em> apiKey:(NSString *)<em>key</em> openSpacePro:(bool)<em>pro</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>path</em></dt>
			<dd><p>location of a database file to use.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>apiKey</em></dt>
			<dd><p>key for online searches.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>openSpacePro</em></dt>
			<dd><p>indicates if online searches should be made against the pro service</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li>If both <code>path</code> and <code>apiKey</code> are nil, then results will only be returned for <code>OSGeocodeTypeGridReference</code></li>
<li>If <code>path</code> is nil, searches for offline types <code>OSGeocodeTypeGazetteer</code>, <code>OSGeocodeTypePostCode</code>, and <code>OSGeocodeTypeRoad</code> will return no results.</li>
<li>If <code>apiKey</code> is nil, searches for online types <code>OSGeocodeTypeOnlineGazetteer</code> and <code>OSGeocodeTypeOnlinePostCode</code> will return no results.</li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OSGeocoder.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Ordnance Survey. All rights reserved. (Last updated: 2013-07-24)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>